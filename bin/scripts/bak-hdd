#!/bin/bash

set -e

#data_dir=/mnt/hdd/data
#data_dir=/mnt/1T/last

#bak_dir="$data_dir/backup"
bak_dir=/mnt/1T/last
#bak_dir=/mnt/4T/last

rsync -avz Documents "$bak_dir"/zhc --info=progress2 --no-i-r
rsync -avz Downloads "$bak_dir"/zhc --info=progress2 --no-i-r
rsync -avz Pictures/screenshots/ "$bak_dir"/zhc/Screenshots --remove-source-files --info=progress2 --no-i-r
rsync -avz screenrecord "$bak_dir"/zhc --info=progress2 --no-i-r
rm -v screenrecord/*.mkv || true

echo 'Syncing ~/.config...'
rsync -a .config/ "$bak_dir"/zhc/linux/home-.config --info=PROGRESS2 --no-i-r --delete
echo 'Syncing QQ files'
rsync -a /home/bczhc/.config/QQ/ "$bak_dir"/zhc/tencent/linuxqq --info=PROGRESS2 --no-i-r

echo 'Syncing Minecraft screenshots'
cd ~/mc/.minecraft
fd -t d screenshots | while read -r d; do
    rsync -av "$d" "$bak_dir"/mc/screenshots --remove-source-files
done

cd ~
echo 'Syncing ~/bin'
rsync -a bin/ "$bak_dir"/zhc/linux/home-bin --delete --info=progress2 --no-i-r

